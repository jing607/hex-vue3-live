import{a as h}from"./axios-Bo0ATomq.js";import{_ as m,c as a,a as t,F as u,e as b,o as i,n as f,t as d,f as k,g as v,d as y}from"./index-BTCFwRSy.js";var C={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"haojing",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:_,VITE_PATH:g}=C,S={data(){return{products:[],loadingStatus:{addCartLoading:""}}},methods:{getProducts(){const s=`${_}/api/${g}/products/all`;h.get(s).then(n=>{this.products=n.data.products}).catch(n=>{alert(n.response.data.message)})},showProductInfo(s){console.log(s),this.$router.push(`/product/${s}`)},addToCart(s,n=1){const r=`${_}/api/${g}/cart`,l={product_id:s,qty:n};this.loadingStatus.addCartLoading=s,h.post(r,{data:l}).then(o=>{console.log(o.data),this.loadingStatus.addCartLoading="product_id"}).catch(o=>{alert(o)})}},components:{},mounted(){this.getProducts()}},L=t("h2",null,"All products here",-1),T={class:"container"},V={class:"table align-middle"},x=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),E={style:{width:"200px"}},P={key:0,class:"h5"},$={key:1},I={class:"h6"},w={class:"h5"},R={class:"btn-group btn-group-sm"},A=["onClick"],B=["disabled","onClick"],D={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"};function U(s,n,r,l,o,c){return i(),a(u,null,[L,t("main",T,[t("table",V,[x,t("tbody",null,[(i(!0),a(u,null,b(o.products,e=>(i(),a("tr",{key:e.id},[t("td",E,[t("div",{style:f([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,d(e.title),1),t("td",null,[e.origin_price===e.price?(i(),a("div",P,d(e.origin_price)+" €",1)):(i(),a("div",$,[t("del",I,"原價 "+d(e.origin_price)+" €",1),t("div",w,"現在只要 "+d(e.price)+" €",1)]))]),t("td",null,[t("div",R,[t("a",{href:"#",onClick:k(p=>c.showProductInfo(e.id),["prevent"]),type:"button",class:"btn btn-outline-secondary"},"查看更多",8,A),t("button",{type:"button",class:"btn btn-outline-danger",disabled:e.id===o.loadingStatus.addCartLoading,onClick:p=>c.addToCart(e.id)},[e.id===o.loadingStatus.addCartLoading?(i(),a("span",D)):v("",!0),y(" 加到購物車 ")],8,B)])])]))),128))])])])],64)}const F=m(S,[["render",U]]);export{F as default};
