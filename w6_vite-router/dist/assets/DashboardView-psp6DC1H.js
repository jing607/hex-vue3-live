import{a as u}from"./axios-Bo0ATomq.js";import{_ as m,c as f,a as n,b as a,w as r,d as e,f as k,l as g,g as V,F as R,r as d,o as l}from"./index-BTCFwRSy.js";var $={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"haojing",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:x}=$,S={data(){return{checkSuccess:!1}},methods:{checkUser(){const c=`${x}/api/user/check`,o=document.cookie.replace(/(?:(?:^|.*;\s*)haojingToken\s*=\s*([^;]*).*$)|^.*$/,"$1");o?(u.defaults.headers.common.Authorization=`${o}`,u.post(c,{api_token:this.token}).then(t=>{console.log("驗證成功",t.data.success),this.checkSuccess=!0}).catch(t=>{alert(t),this.$router.push("/login")})):(alert("請先登入"),this.$router.push("/login"))},signout(){document.cookie="haojingToken=;expires=;",alert("Signed out"),this.$router.push("/login")}},mounted(){this.checkUser()}},v=n("h1",null,"Admin Dashboard",-1);function E(c,o,t,T,h,i){const s=d("RouterLink"),p=d("RouterView");return l(),f(R,null,[v,n("nav",null,[a(s,{to:"/admin/products"},{default:r(()=>[e("Products")]),_:1}),e(" | "),a(s,{to:"/admin/order"},{default:r(()=>[e("Order")]),_:1}),e(" | "),a(s,{to:"/"},{default:r(()=>[e("Back to front")]),_:1}),e(" | "),n("a",{href:"#",onClick:o[0]||(o[0]=k((..._)=>i.signout&&i.signout(..._),["prevent"]))},"Sign out")]),h.checkSuccess?(l(),g(p,{key:0})):V("",!0)],64)}const D=m(S,[["render",E]]);export{D as default};
